"use strict";(self["webpackChunkmenu"]=self["webpackChunkmenu"]||[]).push([[224],{9224:function(e,l,t){t.r(l),t.d(l,{default:function(){return k}});var a=t(6768);const i={class:"pagination-container"};function r(e,l,t,r,n,o){const d=(0,a.g2)("el-text"),s=(0,a.g2)("el-input"),p=(0,a.g2)("el-button"),u=(0,a.g2)("Add"),c=(0,a.g2)("el-table-column"),m=(0,a.g2)("el-table"),g=(0,a.g2)("el-pagination");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.Lk)("p",null,[(0,a.bF)(d,{style:{"font-weight":"bold","margin-left":"20px"}},{default:(0,a.k6)((()=>[(0,a.eW)("编号 ")])),_:1}),(0,a.bF)(s,{modelValue:n.filters.id,"onUpdate:modelValue":l[0]||(l[0]=e=>n.filters.id=e),placeholder:"请输入编号",style:{width:"200px","margin-right":"50px"}},null,8,["modelValue"]),(0,a.bF)(d,{style:{"font-weight":"bold"}},{default:(0,a.k6)((()=>[(0,a.eW)("名称")])),_:1}),(0,a.bF)(s,{modelValue:n.filters.name,"onUpdate:modelValue":l[1]||(l[1]=e=>n.filters.name=e),placeholder:"请输入名称",style:{width:"200px","margin-left":"5px"}},null,8,["modelValue"]),(0,a.bF)(p,{type:"primary",onClick:o.search,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.eW)("搜索")])),_:1},8,["onClick"]),(0,a.bF)(p,{onClick:o.resetFilters,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.eW)("重置")])),_:1},8,["onClick"])]),(0,a.bF)(p,{type:"primary",onClick:o.handleAdd,style:{"margin-left":"10px","margin-bottom":"10px"},plain:""},{default:(0,a.k6)((()=>[(0,a.eW)("新增")])),_:1},8,["onClick"]),n.Visible?((0,a.uX)(),(0,a.Wv)(u,{key:0,onClose:l[2]||(l[2]=e=>n.Visible=!1),dialogVisible:n.Visible},null,8,["dialogVisible"])):(0,a.Q3)("",!0),(0,a.bF)(p,{type:"success",onClick:e.handleExport,style:{"margin-left":"10px","margin-bottom":"10px"},plain:""},{default:(0,a.k6)((()=>[(0,a.eW)("导出")])),_:1},8,["onClick"])]),(0,a.Lk)("div",null,[o.paginatedData.length?((0,a.uX)(),(0,a.Wv)(m,{key:0,data:o.paginatedData,style:{width:"100%"},onSelectionChange:e.handleSelectionChange,border:"",stripe:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{type:"selection",width:"50"}),(0,a.bF)(c,{prop:"supplierId",label:"编号",width:"600"}),(0,a.bF)(c,{prop:"supplierName",label:"名称"}),(0,a.bF)(c,{label:"操作",width:"300"},{default:(0,a.k6)((({row:e})=>[(0,a.bF)(p,{size:"mini",type:"danger",onClick:l=>o.handleDelete(e)},{default:(0,a.k6)((()=>[(0,a.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",i,[(0,a.bF)(g,{"current-page":n.currentPage,"onUpdate:currentPage":l[3]||(l[3]=e=>n.currentPage=e),"page-size":n.pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>n.pageSize=e),small:e.small,disabled:e.disabled,background:e.background,layout:"total, prev, pager, next, jumper",total:n.filteredData.length,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","small","disabled","background","total","onCurrentChange"])])],64)}var n=t(6023),o=t(47),d=t(1620),s=t(4373);const p={class:"dialog-footer"};function u(e,l,t,i,r,n){const o=(0,a.g2)("el-input"),d=(0,a.g2)("el-form-item"),s=(0,a.g2)("el-form"),u=(0,a.g2)("el-button"),c=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:r.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>r.dialogVisible=e),title:"添加供应商",width:"60%"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{"label-position":"top","label-width":"100px",model:r.form},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:"供应商编号"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:r.form.supplierId,"onUpdate:modelValue":l[0]||(l[0]=e=>r.form.supplierId=e),placeholder:"请输入供应商编号"},null,8,["modelValue"])])),_:1}),(0,a.bF)(d,{label:"供应商名称"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:r.form.supplierName,"onUpdate:modelValue":l[1]||(l[1]=e=>r.form.supplierName=e),placeholder:"请输入供应商名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a.Lk)("div",p,[(0,a.bF)(u,{onClick:l[2]||(l[2]=e=>r.dialogVisible=!1)},{default:(0,a.k6)((()=>[(0,a.eW)("取消")])),_:1}),(0,a.bF)(u,{type:"primary",onClick:n.handleConfirm},{default:(0,a.k6)((()=>[(0,a.eW)("确认")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])}var c={name:"Add",data(){return{dialogVisible:!0,form:{supplierId:"",supplierName:""}}},methods:{async handleConfirm(){try{const e=await s.A.post("http://97.64.20.181:8000/add_supplier",{supplierId:this.form.supplierId,supplierName:this.form.supplierName});e.data&&Array.isArray(e.data)?this.SupplierList=e.data:console.error("Unexpected response data:",e.data)}catch(e){console.error("Error:",e)}this.dialogVisible=!1,location.reload()}}},m=t(1241);const g=(0,m.A)(c,[["render",u],["__scopeId","data-v-4657153a"]]);var h=g,f={name:"SupplierControl",components:{ElTable:n.Up,ElTableColumn:n.o8,ElButton:o.S2,Add:h},data(){return{SupplierList:[],filters:{id:"",name:""},filteredData:[],item_total:0,currentPage:1,pageSize:10,activeTab:"all",Visible:!1}},computed:{paginatedData(){const e=(this.currentPage-1)*this.pageSize,l=e+this.pageSize;return this.filteredData.slice(e,l)}},methods:{async fetchSupplierList(){let e=await(0,d._c)();console.log(e),this.SupplierList=e,this.filteredData=e},search(){console.log("搜索条件:",this.filters);let e=this.SupplierList;this.filters.id&&(e=e.filter((e=>e.supplierId.includes(this.filters.id)))),this.filters.name&&(e=e.filter((e=>e.supplierName.includes(this.filters.name)))),this.filteredData=e},async handleDelete(e){this.filteredData=this.filteredData.filter((l=>l!==e)),await s.A.post("http://97.64.20.181:8000/delete_supplier",{supplierId:e.supplierId}).then((e=>{console.log(e)}))},handleAdd(){this.Visible=!0},resetFilters(){location.reload()}},mounted(){this.fetchSupplierList()}};const b=(0,m.A)(f,[["render",r]]);var k=b}}]);
//# sourceMappingURL=224.4e74f5cd.js.map