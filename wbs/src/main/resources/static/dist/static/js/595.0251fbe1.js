"use strict";(self["webpackChunkmenu"]=self["webpackChunkmenu"]||[]).push([[595],{4595:function(e,l,t){t.r(l),t.d(l,{default:function(){return k}});var a=t(6768);const i={class:"pagination-container"};function r(e,l,t,r,n,o){const s=(0,a.g2)("el-text"),d=(0,a.g2)("el-input"),p=(0,a.g2)("el-button"),u=(0,a.g2)("Add"),c=(0,a.g2)("el-table-column"),m=(0,a.g2)("el-table"),h=(0,a.g2)("el-pagination");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.Lk)("p",null,[(0,a.bF)(s,{style:{"font-weight":"bold","margin-left":"20px"}},{default:(0,a.k6)((()=>[(0,a.eW)("编号 ")])),_:1}),(0,a.bF)(d,{modelValue:n.filters.id,"onUpdate:modelValue":l[0]||(l[0]=e=>n.filters.id=e),placeholder:"请输入编号",style:{width:"200px","margin-right":"50px"}},null,8,["modelValue"]),(0,a.bF)(s,{style:{"font-weight":"bold"}},{default:(0,a.k6)((()=>[(0,a.eW)("供应商")])),_:1}),(0,a.bF)(d,{modelValue:n.filters.supplier,"onUpdate:modelValue":l[1]||(l[1]=e=>n.filters.supplier=e),placeholder:"请输入名称",style:{width:"200px","margin-left":"5px"}},null,8,["modelValue"]),(0,a.bF)(p,{type:"primary",onClick:o.search,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.eW)("搜索")])),_:1},8,["onClick"]),(0,a.bF)(p,{onClick:o.resetFilters,style:{"margin-left":"10px"}},{default:(0,a.k6)((()=>[(0,a.eW)("重置")])),_:1},8,["onClick"])]),(0,a.bF)(p,{type:"primary",onClick:o.handleAdd,style:{"margin-left":"10px","margin-bottom":"10px"},plain:""},{default:(0,a.k6)((()=>[(0,a.eW)("新增")])),_:1},8,["onClick"]),n.Visible?((0,a.uX)(),(0,a.Wv)(u,{key:0,onClose:l[2]||(l[2]=e=>n.Visible=!1),dialogVisible:n.Visible},null,8,["dialogVisible"])):(0,a.Q3)("",!0),(0,a.bF)(p,{type:"success",onClick:e.handleExport,style:{"margin-left":"10px","margin-bottom":"10px"},plain:""},{default:(0,a.k6)((()=>[(0,a.eW)("导出")])),_:1},8,["onClick"])]),(0,a.Lk)("div",null,[o.paginatedData.length?((0,a.uX)(),(0,a.Wv)(m,{key:0,data:o.paginatedData,style:{width:"100%"},onSelectionChange:e.handleSelectionChange,border:"",stripe:""},{default:(0,a.k6)((()=>[(0,a.bF)(c,{type:"selection",width:"50"}),(0,a.bF)(c,{prop:"supId",label:"编号",width:"600"}),(0,a.bF)(c,{prop:"supName",label:"名称"}),(0,a.bF)(c,{prop:"supplier",label:"供应商"}),(0,a.bF)(c,{label:"操作",width:"300"},{default:(0,a.k6)((({row:e})=>[(0,a.bF)(p,{size:"mini",type:"danger",onClick:l=>o.handleDelete(e)},{default:(0,a.k6)((()=>[(0,a.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",i,[(0,a.bF)(h,{"current-page":n.currentPage,"onUpdate:currentPage":l[3]||(l[3]=e=>n.currentPage=e),"page-size":n.pageSize,"onUpdate:pageSize":l[4]||(l[4]=e=>n.pageSize=e),small:e.small,disabled:e.disabled,background:e.background,layout:"total, prev, pager, next, jumper",total:n.filteredData.length,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","small","disabled","background","total","onCurrentChange"])])],64)}var n=t(6023),o=t(47),s=t(1620),d=t(4373);const p={class:"dialog-footer"};function u(e,l,t,i,r,n){const o=(0,a.g2)("el-input"),s=(0,a.g2)("el-form-item"),d=(0,a.g2)("el-option"),u=(0,a.g2)("el-select"),c=(0,a.g2)("el-form"),m=(0,a.g2)("el-button"),h=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:r.dialogVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>r.dialogVisible=e),title:"添加零件",width:"60%"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{"label-position":"top","label-width":"100px",model:r.form},{default:(0,a.k6)((()=>[(0,a.bF)(s,{label:"零件编号"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:r.form.supId,"onUpdate:modelValue":l[0]||(l[0]=e=>r.form.supId=e),placeholder:"请输入零件编号"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"零件名称"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:r.form.supName,"onUpdate:modelValue":l[1]||(l[1]=e=>r.form.supName=e),placeholder:"请输入零件名称"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"供应商"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{modelValue:r.form.supplier,"onUpdate:modelValue":l[2]||(l[2]=e=>r.form.supplier=e),placeholder:"请选择供应商"},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.SupplierList,(e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.supplierId,label:e.supplierName,value:e.supplierName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a.Lk)("div",p,[(0,a.bF)(m,{onClick:l[3]||(l[3]=e=>r.dialogVisible=!1)},{default:(0,a.k6)((()=>[(0,a.eW)("取消")])),_:1}),(0,a.bF)(m,{type:"primary",onClick:n.handleConfirm},{default:(0,a.k6)((()=>[(0,a.eW)("确认")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])}var c={name:"Add",data(){return{dialogVisible:!0,form:{supId:"",supName:"",supplier:""},SupplierList:[]}},methods:{async fetchSupplierList(){try{const e=await d.A.post("http://97.64.20.181:8000/get_supplier_list",{});e.data&&Array.isArray(e.data)?this.SupplierList=e.data:console.error("Unexpected response data:",e.data)}catch(e){console.error("Error fetching supplier list:",e)}},async handleConfirm(){try{const e=await d.A.post("http://97.64.20.181:8000/add_supplement",{supId:this.form.supId,supName:this.form.supName,supplier:this.form.supplier});e.data&&Array.isArray(e.data)?this.SupplierList=e.data:console.error("Unexpected response data:",e.data)}catch(e){console.error("Error fetching supplier list:",e)}this.dialogVisible=!1,location.reload()}},mounted(){this.fetchSupplierList()}},m=t(1241);const h=(0,m.A)(c,[["render",u],["__scopeId","data-v-2082b49d"]]);var f=h,g={name:"InventoryControl",components:{ElTable:n.Up,ElTableColumn:n.o8,ElButton:o.S2,Add:f},data(){return{InventoryList:[],filters:{id:"",supplier:""},filteredData:[],item_total:0,currentPage:1,pageSize:10,activeTab:"all",Visible:!1}},computed:{paginatedData(){const e=(this.currentPage-1)*this.pageSize,l=e+this.pageSize;return this.filteredData.slice(e,l)}},methods:{async fetchInventory(){let e={supId:null,supplier:null},l=await(0,s.W3)(e);console.log(l),this.InventoryList=l,this.filteredData=l},search(){console.log("搜索条件:",this.filters);let e=this.InventoryList;this.filters.id&&(e=e.filter((e=>e.supId.includes(this.filters.id)))),this.filters.supplier&&(e=e.filter((e=>e.supplier.includes(this.filters.supplier)))),this.filteredData=e},async handleDelete(e){this.filteredData=this.filteredData.filter((l=>l!==e)),await d.A.post("http://97.64.20.181:8000/delete_supplement",{supId:e.supId}).then((e=>{console.log(e)}))},handleAdd(){this.Visible=!0},resetFilters(){location.reload()}},mounted(){this.fetchInventory()}};const b=(0,m.A)(g,[["render",r]]);var k=b}}]);
//# sourceMappingURL=595.0251fbe1.js.map