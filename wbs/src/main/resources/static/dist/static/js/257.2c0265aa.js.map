{"version":3,"file":"static/js/257.2c0265aa.js","mappings":"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","sources":["webpack://menu/./src/views/move/InstoreDo.vue","webpack://menu/./src/views/move/InstoreDo.vue?a973"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- 添加订单号和供应商信息 -->\r\n    <div class=\"flex-container\">\r\n      <div class=\"info\">\r\n        <el-input v-model=\"orderNum\" style=\"max-width: 400px\" placeholder=\"\" disabled>\r\n          <template #prepend>订单号</template>\r\n        </el-input>\r\n      </div>\r\n      <div class=\"info\">\r\n        <el-input v-model=\"supplier\" style=\"max-width: 400px\" placeholder=\"\" disabled>\r\n          <template #prepend>供应商</template>\r\n        </el-input>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"margin-bottom: 20px\">\r\n      \r\n    </div>\r\n\r\n    <div class=\"material-details\">\r\n      <el-col :span=\"24\">\r\n        <div class=\"content\">\r\n          <span class=\"title\">物料明细</span>\r\n        </div>\r\n      </el-col>\r\n    </div>\r\n\r\n    <el-table :data=\"tableData\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\"  header-align=\"center\" border>\r\n      <el-table-column type=\"selection\" width=\"55\" ></el-table-column>\r\n      <el-table-column prop=\"supId\" label=\"零件号\" width=\"180\" align=\"center\" ></el-table-column>\r\n      <el-table-column prop=\"materialType\" label=\"物料类型\" width=\"180\" align=\"center\"></el-table-column>\r\n      <el-table-column prop=\"expInNum\" label=\"计划数量\" width=\"180\" align=\"center\"></el-table-column>\r\n      <el-table-column label=\"实际数量\" width=\"180\" align=\"center\">\r\n        <template #default=\"row\">\r\n          <!--<el-input-number v-model=\"scope.row.actInName\" size=\"small\" :min=\"0\" :max=\"scope.row.expInNum\" />-->\r\n          <el-input-number v-model=\"tableData[row.$index].actInNum\" :min=\"data_unchanged[row.$index]\" :max=\"tableData[row.$index].expInNum\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"入库状态\" width=\"180\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-select v-model=\"scope.row.status\">\r\n            <el-option v-for=\"status in storageStatuses\" :key=\"status\" :label=\"status\" :value=\"status\"></el-option>\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"note\" label=\"备注\" width=\"180\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-input v-model=\"scope.row.note\"></el-input>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div style=\"margin-bottom: 20px\">\r\n      \r\n    </div>\r\n\r\n    <div align=\"center\">\r\n      <el-button-group class=\"button-group\">\r\n      <el-button type=\"primary\" @click=\"save\">保存</el-button>\r\n      <el-button @click=\"cancel\">取消</el-button>\r\n    </el-button-group>\r\n    </div>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { request_enstore_list, update_detail_list, update_stock_accordingly } from '../../request/request.js';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      selection: [],\r\n      data_unchanged: [],\r\n      warehouses: ['吉耀', '丹灶'],\r\n      storageStatuses: ['未发货', '已入库', '部分入库'],\r\n      orderNum: \"06132024-1449Biff\",\r\n      supplier: \"Wizzy_Frostech\"\r\n    };\r\n  },\r\n\r\n  created() {\r\n        this.res_data1 = this.$route.query.id;\r\n        this.res_data2 = this.$route.query.supplier;\r\n        this.orderNum = this.res_data1;\r\n        this.supplier = this.res_data2;\r\n        this.get_enstore_list();\r\n\r\n    },\r\n  methods: {\r\n    increaseQuantity(index) {\r\n      this.items[index].actualQuantity++;\r\n    },\r\n    async get_enstore_list() {\r\n      try {\r\n        let info = {\r\n          \"listNum\": this.orderNum,\r\n        };\r\n        let data = await request_enstore_list(info);\r\n        data = data.wrapInfoDetails.map(item => ({\r\n          orderNum: data.listNum,\r\n          storageStatus: data.listStatus,\r\n          supplier: data.supplier,\r\n          supId: item.supId,\r\n          expInNum: item.expInNum,\r\n          actInNum: item.actInNum,\r\n          boxes: item.boxes,\r\n          wrapId: item.wrapId,\r\n          wrapSize: item.wrapSize,\r\n          status: item.status\r\n        }));\r\n\r\n        data = data.map(item => ({\r\n          ...item,\r\n          actInNum: item.actInNum === null ? 0 : item.actInNum\r\n        }));\r\n        for (let i = 0; i < data.length; i++) {\r\n          this.data_unchanged.push(data[i].actInNum);\r\n        }\r\n        const statusMapping = {\r\n          \"OPEN\": \"未发货\",\r\n          \"PENDING\": \"部分入库\",\r\n          \"CLOSED\": \"已入库\",\r\n        };\r\n        data.forEach(item => {\r\n          if (item.status in statusMapping) {\r\n            item.status = statusMapping[item.status];\r\n          }\r\n        });\r\n        this.tableData = data;\r\n        console.log(\"TableData\");\r\n      console.log(this.tableData);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async save_detail_list(id, number) {\r\n      try {\r\n        let info = {\r\n          listNum: this.orderNum,\r\n          supID: id,\r\n          actInNum: number\r\n        };\r\n        await update_detail_list(info);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async save_stock_accordingly() {\r\n      try {\r\n        let info = {\r\n          listNum: this.orderNum,\r\n          originalActInNum: this.data_unchanged\r\n        };\r\n        await update_stock_accordingly(info);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    handleSelectionChange(selection) {\r\n      this.selection = selection;\r\n    },\r\n    decreaseQuantity(index) {\r\n      if (this.items[index].actualQuantity > 1) {\r\n        this.items[index].actualQuantity--;\r\n      }\r\n    },\r\n    async save() {\r\n      for (let i = 0; i < this.selection.length; i++) {\r\n        console.log(\"this.Selection\");\r\n        console.log(this.selection);\r\n        await this.save_detail_list(this.selection[i].supId, this.selection[i].actInNum);\r\n      }\r\n       await this.save_stock_accordingly();\r\n       this.$router.replace('/move/enter/try/enter');\r\n\r\n    },\r\n    cancel() {\r\n      console.log('取消');\r\n      this.$router.replace('/move/enter/try/enter');\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.material-details {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.flex-container {\r\n  display: flex;\r\n}\r\n.info {\r\n  margin-right: 20px;\r\n}\r\n.content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 10px;\r\n  background-color: #f0f0f0;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 4px;\r\n}\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n.button-group {\r\n  margin-left: 10px;\r\n}\r\n.container {\r\n  padding: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./InstoreDo.vue?vue&type=template&id=9f452ae0&scoped=true\"\nimport script from \"./InstoreDo.vue?vue&type=script&lang=js\"\nexport * from \"./InstoreDo.vue?vue&type=script&lang=js\"\n\nimport \"./InstoreDo.vue?vue&type=style&index=0&id=9f452ae0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9f452ae0\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","align","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_el_input","modelValue","$data","orderNum","_cache","$event","placeholder","disabled","prepend","_withCtx","_createTextVNode","_","_hoisted_4","supplier","_hoisted_5","_hoisted_6","_component_el_col","span","default","_hoisted_7","_component_el_table","data","tableData","onSelectionChange","$options","handleSelectionChange","border","_component_el_table_column","type","width","prop","label","row","_component_el_input_number","$index","actInNum","min","data_unchanged","max","expInNum","scope","_component_el_select","status","_Fragment","_renderList","storageStatuses","_createBlock","_component_el_option","key","value","note","_hoisted_8","_hoisted_9","_component_el_button_group","_component_el_button","onClick","save","cancel","selection","warehouses","created","this","res_data1","$route","query","id","res_data2","get_enstore_list","methods","increaseQuantity","index","items","actualQuantity","info","request_enstore_list","wrapInfoDetails","map","item","listNum","storageStatus","listStatus","supId","boxes","wrapId","wrapSize","i","length","push","statusMapping","forEach","console","log","error","save_detail_list","number","supID","update_detail_list","save_stock_accordingly","originalActInNum","update_stock_accordingly","decreaseQuantity","$router","replace","__exports__","render"],"sourceRoot":""}