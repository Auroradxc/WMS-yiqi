"use strict";(self["webpackChunkmenu"]=self["webpackChunkmenu"]||[]).push([[257],{1257:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var l=a(6768);const n=e=>((0,l.Qi)("data-v-9f452ae0"),e=e(),(0,l.jt)(),e),s={class:"container"},i={class:"flex-container"},o={class:"info"},u={class:"info"},r=n((()=>(0,l.Lk)("div",{style:{"margin-bottom":"20px"}},null,-1))),d={class:"material-details"},c=n((()=>(0,l.Lk)("div",{class:"content"},[(0,l.Lk)("span",{class:"title"},"物料明细")],-1))),p=n((()=>(0,l.Lk)("div",{style:{"margin-bottom":"20px"}},null,-1))),m={align:"center"};function h(e,t,a,n,h,b){const g=(0,l.g2)("el-input"),_=(0,l.g2)("el-col"),k=(0,l.g2)("el-table-column"),N=(0,l.g2)("el-input-number"),y=(0,l.g2)("el-option"),w=(0,l.g2)("el-select"),f=(0,l.g2)("el-table"),I=(0,l.g2)("el-button"),v=(0,l.g2)("el-button-group");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",i,[(0,l.Lk)("div",o,[(0,l.bF)(g,{modelValue:h.orderNum,"onUpdate:modelValue":t[0]||(t[0]=e=>h.orderNum=e),style:{"max-width":"400px"},placeholder:"",disabled:""},{prepend:(0,l.k6)((()=>[(0,l.eW)("订单号")])),_:1},8,["modelValue"])]),(0,l.Lk)("div",u,[(0,l.bF)(g,{modelValue:h.supplier,"onUpdate:modelValue":t[1]||(t[1]=e=>h.supplier=e),style:{"max-width":"400px"},placeholder:"",disabled:""},{prepend:(0,l.k6)((()=>[(0,l.eW)("供应商")])),_:1},8,["modelValue"])])]),r,(0,l.Lk)("div",d,[(0,l.bF)(_,{span:24},{default:(0,l.k6)((()=>[c])),_:1})]),(0,l.bF)(f,{data:h.tableData,style:{width:"100%"},onSelectionChange:b.handleSelectionChange,"header-align":"center",border:""},{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"selection",width:"55"}),(0,l.bF)(k,{prop:"supId",label:"零件号",width:"180",align:"center"}),(0,l.bF)(k,{prop:"materialType",label:"物料类型",width:"180",align:"center"}),(0,l.bF)(k,{prop:"expInNum",label:"计划数量",width:"180",align:"center"}),(0,l.bF)(k,{label:"实际数量",width:"180",align:"center"},{default:(0,l.k6)((e=>[(0,l.bF)(N,{modelValue:h.tableData[e.$index].actInNum,"onUpdate:modelValue":t=>h.tableData[e.$index].actInNum=t,min:h.data_unchanged[e.$index],max:h.tableData[e.$index].expInNum},null,8,["modelValue","onUpdate:modelValue","min","max"])])),_:1}),(0,l.bF)(k,{label:"入库状态",width:"180",align:"center"},{default:(0,l.k6)((e=>[(0,l.bF)(w,{modelValue:e.row.status,"onUpdate:modelValue":t=>e.row.status=t},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.storageStatuses,(e=>((0,l.uX)(),(0,l.Wv)(y,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,l.bF)(k,{prop:"note",label:"备注",width:"180",align:"center"},{default:(0,l.k6)((e=>[(0,l.bF)(g,{modelValue:e.row.note,"onUpdate:modelValue":t=>e.row.note=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data","onSelectionChange"]),p,(0,l.Lk)("div",m,[(0,l.bF)(v,{class:"button-group"},{default:(0,l.k6)((()=>[(0,l.bF)(I,{type:"primary",onClick:b.save},{default:(0,l.k6)((()=>[(0,l.eW)("保存")])),_:1},8,["onClick"]),(0,l.bF)(I,{onClick:b.cancel},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1},8,["onClick"])])),_:1})])])}a(4114);var b=a(1620),g={data(){return{tableData:[],selection:[],data_unchanged:[],warehouses:["吉耀","丹灶"],storageStatuses:["未发货","已入库","部分入库"],orderNum:"06132024-1449Biff",supplier:"Wizzy_Frostech"}},created(){this.res_data1=this.$route.query.id,this.res_data2=this.$route.query.supplier,this.orderNum=this.res_data1,this.supplier=this.res_data2,this.get_enstore_list()},methods:{increaseQuantity(e){this.items[e].actualQuantity++},async get_enstore_list(){try{let e={listNum:this.orderNum},t=await(0,b.id)(e);t=t.wrapInfoDetails.map((e=>({orderNum:t.listNum,storageStatus:t.listStatus,supplier:t.supplier,supId:e.supId,expInNum:e.expInNum,actInNum:e.actInNum,boxes:e.boxes,wrapId:e.wrapId,wrapSize:e.wrapSize,status:e.status}))),t=t.map((e=>({...e,actInNum:null===e.actInNum?0:e.actInNum})));for(let l=0;l<t.length;l++)this.data_unchanged.push(t[l].actInNum);const a={OPEN:"未发货",PENDING:"部分入库",CLOSED:"已入库"};t.forEach((e=>{e.status in a&&(e.status=a[e.status])})),this.tableData=t,console.log("TableData"),console.log(this.tableData)}catch(e){console.error(e)}},async save_detail_list(e,t){try{let a={listNum:this.orderNum,supID:e,actInNum:t};await(0,b.Bq)(a)}catch(a){console.error(a)}},async save_stock_accordingly(){try{let e={listNum:this.orderNum,originalActInNum:this.data_unchanged};await(0,b.Ju)(e)}catch(e){console.error(e)}},handleSelectionChange(e){this.selection=e},decreaseQuantity(e){this.items[e].actualQuantity>1&&this.items[e].actualQuantity--},async save(){for(let e=0;e<this.selection.length;e++)console.log("this.Selection"),console.log(this.selection),await this.save_detail_list(this.selection[e].supId,this.selection[e].actInNum);await this.save_stock_accordingly(),this.$router.replace("/move/enter/try/enter")},cancel(){console.log("取消"),this.$router.replace("/move/enter/try/enter")}}},_=a(1241);const k=(0,_.A)(g,[["render",h],["__scopeId","data-v-9f452ae0"]]);var N=k}}]);
//# sourceMappingURL=257.2c0265aa.js.map